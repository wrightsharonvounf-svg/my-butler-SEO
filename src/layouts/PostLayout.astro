---
// src/layouts/PostLayout.astro
import Layout from '../layouts/Layout.astro';

const { content, Content } = Astro.props;

// --- ЛОГИКА ДЛЯ ХЛЕБНЫХ КРОШЕК ---
const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Блог",
      "item": new URL('/blog', Astro.site).href
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": content.title,
      "item": new URL(`/blog/${content.slug}/`, Astro.site).href
    }
  ]
};
---

<Layout 
  title={content.title} 
  description={content.description}
>
  <!-- Хлебные крошки в head -->
  <Fragment slot="head">
    <script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
  </Fragment>

  <article>
    <!-- Визуальные хлебные крошки -->
    <nav aria-label="breadcrumb" style="margin-bottom: 1rem;">
      <ol style="display: flex; list-style: none; padding: 0; margin: 0;">
        <li><a href="/blog" style="text-decoration: none;">Блог</a></li>
        <li style="margin: 0 0.5rem;">/</li>
        <li aria-current="page">{content.title}</li>
      </ol>
    </nav>

    {content.heroImage && (
      <img 
        src={content.heroImage} 
        alt={content.title} 
        style="
          width: 100%; 
          aspect-ratio: 16 / 9; 
          object-fit: cover; 
          border-radius: 8px; 
          margin-bottom: 2rem;
        "
      />
    )}

    <h1>{content.title}</h1>
    <p>Опубликовано: {new Date(content.pubDate).toLocaleDateString('ru-RU')}</p>
    <hr style="margin: 1rem 0;">
    <div class="prose max-w-none">
      <Content />
    </div>
  </article>
</Layout>