---
// src/layouts/PostLayout.astro
import Layout from '../layouts/Layout.astro';
const { content } = Astro.props;
---

<Layout 
  title={content.title} 
  description={content.description}
  schema={{
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": content.title,
    "datePublished": content.pubDate,
    "author": {
      "@type": "Person",
      "name": content.author || "ButlerSPB"
    }
  }}
>
---
const { pathname } = Astro.url;
const parts = pathname.split('/').filter(Boolean);
// ['blog', 'arenda', 'slug']

const category = parts[1];
---

<nav style="font-size: 0.9rem; margin-bottom: 1rem;">
  <a href="/">Главная</a> →
  <a href="/blog/">Блог</a> →
  <a href={`/blog/${category}/`}>{category}</a> →
  <span>{content.title}</span>
</nav>

  <article class="prose prose-lg max-w-4xl mx-auto p-6">
    <header class="mb-8">
      <h1 class="text-3xl md:text-4xl font-bold">{content.title}</h1>
      <p class="text-gray-600 mt-2">
        <time datetime={content.pubDate}>
          {new Date(content.pubDate).toLocaleDateString('ru-RU')}
        </time>
        {content.author && ` • Автор: ${content.author}`}
      </p>
    </header>

    <main class="content">
      <slot />
    </main>

    <footer class="mt-12 pt-6 border-t text-gray-500 text-sm">
      © {new Date().getFullYear()} My Butler Factory
    </footer>
	<script type="application/ld+json">
{JSON.stringify({
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Главная",
      "item": "https://www.butler-tim.ru/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Блог",
      "item": "https://www.butler-tim.ru/blog/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": category,
      "item": `https://www.butler-tim.ru/blog/${category}/`
    }
  ]
})}
</script>
  </article>
</Layout>